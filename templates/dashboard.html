{% extends "base.html" %} {% block content %}

<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<div class="mx-8 my-4 flex space-x-[-20px] flex justify-center">
  <!-- Distribution card -->
  <div
    class="max-w-sm w-full rounded-lg shadow bg-gray-800 p-4 md:p-6"
  >
    <div class="flex justify-between items-start w-full">
      <div class="flex-col items-center">
        <div class="flex items-center mb-1">
          <h5
            class="text-xl font-bold leading-none text-white mr-1"
          >
            Your distribution of $15
          </h5>
          <svg
            data-popover-target="chart-info"
            data-popover-placement="bottom"
            class="w-3.5 h-3.5 text-gray-400 hover:text-white cursor-pointer ml-1"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm0 16a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm1-5.034V12a1 1 0 0 1-2 0v-1.418a1 1 0 0 1 1.038-.999 1.436 1.436 0 0 0 1.488-1.441 1.501 1.501 0 1 0-3-.116.986.986 0 0 1-1.037.961 1 1 0 0 1-.96-1.037A3.5 3.5 0 1 1 11 11.466Z"
            />
          </svg>
          <div
            data-popover
            id="chart-info"
            role="tooltip"
            class="absolute z-10 invisible inline-block text-sm transition-opacity duration-300 border rounded-lg shadow-sm opacity-0 w-72 bg-gray-800 border-gray-600 text-gray-400"
          >
            <div class="p-3 space-y-2">
              <h3 class="font-semibold text-white">
                Budget Distribution Among Creators
              </h3>
              <p>
                View a pie chart that shows how your monthly budget is
                distributed among the content creators you support. This chart
                provides a visual representation of how your contributions are
                divided based on your watch time.
              </p>
              <h3 class="font-semibold text-white">
                How it works
              </h3>
              <p>
                Your monthly budget is divided among the content creators you
                watch based on the amount of time you spend watching their
                content. The more you watch a particular creator, the larger
                their share of your budget. This ensures that your contributions
                reflect your viewing preferences and support the creators you
                enjoy most. Intelligent metric system is used to determine your
                favourite content creators.
              </p>
              <a
                href="#"
                class="flex items-center font-medium text-blue-500 hover:text-blue-600 hover:underline"
                >Learn more
                <svg
                  class="w-2 h-2 ml-1.5"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 6 10"
                >
                  <path
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="m1 9 4-4-4-4"/></svg></a>
            </div>
            <div data-popper-arrow></div>
          </div>
        </div>
        <button
          id="dateRangeButton"
          data-dropdown-toggle="dateRangeDropdown"
          data-dropdown-ignore-click-outside-class="datepicker"
          type="button"
          class="inline-flex items-center text-blue-600 font-medium hover:underline"
        >
          31 Nov - 31 Dec
          <svg
            class="w-3 h-3 ml-2"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 10 6"
          >
            <path
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="m1 1 4 4 4-4"
            />
          </svg>
        </button>
        <div
          id="dateRangeDropdown"
          class="z-10 hidden divide-y rounded-lg shadow w-80 lg:w-96 bg-gray-700 divide-gray-600"
        >
          <div class="p-3" aria-labelledby="dateRangeButton">
            <div date-rangepicker datepicker-autohide class="flex items-center">
              <div class="relative">
                <div
                  class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
                >
                  <svg
                    class="w-4 h-4 text-gray-400"
                    aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"
                    />
                  </svg>
                </div>
                <input
                  name="start"
                  type="text"
                  class="border text-sm rounded-lg block w-full pl-10 p-2.5 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500"
                  placeholder="Start date"
                />
              </div>
              <span class="mx-2 text-gray-400">to</span>
              <div class="relative">
                <div
                  class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
                >
                  <svg
                    class="w-4 h-4 text-gray-400"
                    aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z"
                    />
                  </svg>
                </div>
                <input
                  name="end"
                  type="text"
                  class="border text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 bg-gray-700 border-gray-600 placeholder-gray-400 text-white"
                  placeholder="End date"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="flex justify-end items-center"></div>
    </div>

    <!-- Line Chart -->
    <div class="py-6" id="pie-chart"></div>

    <div
      class="grid grid-cols-1 items-center border-gray-200 border-t dark:border-gray-700 justify-between"
    >
      <div class="flex justify-between items-center pt-5">
        <!-- Button -->
        <button
          id="dropdownDefaultButton"
          data-dropdown-toggle="lastDaysdropdown"
          data-dropdown-placement="bottom"
          class="text-sm font-medium text-gray-400 text-center inline-flex items-center hover:text-white"
          type="button"
        >
          <span> Last 7 days </span>
          <svg
            class="w-2.5 m-2.5 ml-1.5"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 10 6"
          >
            <path
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="m1 1 4 4 4-4"
            />
          </svg>
        </button>
        <div
          id="lastDaysdropdown"
          class="z-10 hidden divide-y divide-gray-100 rounded-lg shadow w-44 bg-gray-700"
        >
          <ul
            class="py-2 text-sm text-gray-200"
            aria-labelledby="dropdownDefaultButton"
          >
            <li>
              <a
                href="#"
                class="block px-4 py-2 hover:bg-gray-600 hover:text-white"
                >Yesterday</a
              >
            </li>
            <li>
              <a
                href="#"
                class="block px-4 py-2 hover:bg-gray-600 hover:text-white"
                >Today</a
              >
            </li>
            <li>
              <a
                href="#"
                class="block px-4 py-2 hover:bg-gray-600 hover:text-white"
                >Last 7 days</a
              >
            </li>
            <li>
              <a
                href="#"
                class="block px-4 py-2 hover:bg-gray-600 hover:text-white"
                >Last 30 days</a
              >
            </li>
            <li>
              <a
                href="#"
                class="block px-4 py-2 hover:bg-gray-600 hover:text-white"
                >Last 90 days</a
              >
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ApexCharts options and config
    window.addEventListener("load", function () {
      let series = [];
      let labels = [];

      {% for creator in watch_data %}
        series.push(parseFloat("{{ watch_data[creator] }}"));
        labels.push("{{ creator }}");
      {% endfor %}

      const getChartOptions = () => {
        return {
          series: series,
          colors: ["#1C64F2", "#16BDCA", "#9061F9"],
          chart: {
            height: 420,
            width: "100%",
            type: "pie",
          },
          stroke: {
            colors: ["white"],
            lineCap: "",
          },
          plotOptions: {
            pie: {
              labels: {
                show: true,
              },
              size: "100%",
              dataLabels: {
                offset: -25,
              },
            },
          },
          labels: labels,
          dataLabels: {
            enabled: true,
            style: {
              fontFamily: "Inter, sans-serif",
            },
          },
          legend: {
            position: "bottom",
            fontFamily: "Inter, sans-serif",
          },
          yaxis: {
            labels: {
              formatter: function (value) {
                return "$" + value;
              },
            },
          },
          xaxis: {
            labels: {
              formatter: function (value) {
                return "$" + value;
              },
            },
            axisTicks: {
              show: false,
            },
            axisBorder: {
              show: false,
            },
          },
        };
      };

      if (
        document.getElementById("pie-chart") &&
        typeof ApexCharts !== "undefined"
      ) {
        const chart = new ApexCharts(
          document.getElementById("pie-chart"),
          getChartOptions()
        );
        chart.render();
      }
    });
  </script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const dropdownItems = document.querySelectorAll("#lastDaysdropdown a");
      const dropdownButton = document.getElementById("dropdownDefaultButton");
      const dropdownButtonText = dropdownButton.querySelector("span");

      dropdownItems.forEach((item) => {
        item.addEventListener("click", function (event) {
          event.preventDefault();
          dropdownButtonText.textContent = item.textContent;
        });
      });
    });
  </script>

  <div class="flex flex-col space-y-2">
    <!-- Analytics card   -->
    <div class="mx-8">
      <section
        href="#"
        class="block max-w-sm p-6 border rounded-lg shadow bg-gray-800 border-gray-700"
      >
        <h5
          class="text-xl font-bold leading-none text-white mr-1 pb-2"
        >
          Analytics
        </h5>
        <h6 class="font-normal text-gray-400">
          Most watched: Kurzgesagt
        </h6>
        <h6 class="font-normal text-gray-700 dark:text-gray-400">
          Most paid out till date: Kurzgesagt
        </h6>
        <a
          href="#"
          class="inline-flex items-center mt-4 px-3 py-2 text-sm font-medium text-center text-white rounded-lg focus:ring-4 focus:outline-none bg-blue-600 hover:bg-blue-700 focus:ring-blue-800 transition ease-in-out duration-500"
        >
          More info
          <svg
            class="w-3.5 h-3.5 ml-2"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 14 10"
          >
            <path
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M1 5h12m0 0L9 1m4 4L9 9"
            />
          </svg>
        </a>
      </section>
    </div>

    <!-- Customize card -->
    <div class="mx-8">
      <section
        href="#"
        class="block max-w-sm p-6 border rounded-lg shadow bg-gray-800 border-gray-700"
      >
        <h5
          class="text-xl font-bold leading-none text-white mr-1 pb-2"
        >
          Customize
        </h5>
        <h6 class="font-normal text-gray-400">
          Change amount:
        </h6>
        <textarea
          id="amounttext"
          rows="1"
          class="resize-none block p-2.5 text-sm rounded-lg border focus:ring-blue-500 focus:border-blue-500 bg-gray-700 border-gray-600 placeholder-gray-400 text-white"
          placeholder="$15.00"
        ></textarea>
        <a
          href="#"
          class="inline-flex items-center mt-4 px-3 py-2 text-sm font-medium text-center text-white rounded-lg focus:ring-4 focus:outline-none  bg-blue-600 hover:bg-blue-700 focus:ring-blue-800 transition ease-in-out duration-500"
        >
          More info
          <svg
            class="w-3.5 h-3.5 ml-2"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 14 10"
          >
            <path
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M1 5h12m0 0L9 1m4 4L9 9"
            />
          </svg>
        </a>
      </section>
    </div>
    
    <!-- Extension Status -->
    <div class="mx-8">
      <section
        href="#"
        class="block max-w-sm p-6 border rounded-lg shadow bg-gray-800 border-gray-700"
      >
        <h5
          class="text-xl font-bold leading-none text-white mr-1 pb-2"
        >
        Status
        </h5>
        <h6 class="font-normal text-gray-400">
          Chrome Extension: 

          <a 
          id = "status-active"
          class="inline-flex items-center px-2 py-1 mx-[-2px] text-sm font-medium text-center text-white bg-green-600 rounded-lg hover:bg-green-400 focus:ring-4 focus:outline-none focus:ring-green-300 transition ease-in-out duration-500 hover:cursor-pointer scale-90">Active</a> 
          
          <a 
          id="status-inactive"
          class="inline-flex items-center px-2 py-1 mx-[-2px] text-sm font-medium text-center text-red-500 rounded-lg border border-red-800 hover:bg-red-700 hover:text-white focus:ring-4 focus:outline-none focus:ring-red-800 focus:text-white transition ease-in-out duration-500 hover:cursor-pointer scale-90">Inactive</a>
        
        </h6>

        <span>
        <div class="flex pt-2 space-x-3">
          <svg class="w-4 h-4 text-blue-600" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 8 19">
            <path fill-rule="evenodd" d="M6.135 3H8V0H6.135a4.147 4.147 0 0 0-4.142 4.142V6H0v3h2v9.938h3V9h2.021l.592-3H5V3.591A.6.6 0 0 1 5.592 3h.543Z" clip-rule="evenodd"/>
          </svg>

          <svg class="w-5 h-4 text-red-800" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 14">
            <path fill-rule="evenodd" d="M19.7 3.037a4.26 4.26 0 0 0-.789-1.964 2.84 2.84 0 0 0-1.984-.84c-2.767-.2-6.926-.2-6.926-.2s-4.157 0-6.928.2a2.836 2.836 0 0 0-1.983.84A4.225 4.225 0 0 0 .3 3.038a30.148 30.148 0 0 0-.2 3.206v1.5c.01 1.071.076 2.142.2 3.206.094.712.363 1.39.784 1.972.604.536 1.38.837 2.187.848 1.583.15 6.731.2 6.731.2s4.161 0 6.928-.2a2.844 2.844 0 0 0 1.985-.84 4.27 4.27 0 0 0 .787-1.965c.124-1.064.19-2.135.2-3.206V6.243a30.672 30.672 0 0 0-.202-3.206ZM8.008 9.59V3.97l5.4 2.819-5.4 2.8Z" clip-rule="evenodd"/>
          </svg>

          <svg class="mx-0.5 w-4 h-4 text-white bg-gradient-to-tr from-yellow-200 via-pink-400 to-purple-600 inline-block" xmlns="http://www.w3.org/2000/svg">
            <path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z"/>
          </svg>


          <svg class="w-4 h-4 text-white" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-tiktok" viewBox="0 0 16 16">
            <path d="M9 0h1.98c.144.715.54 1.617 1.235 2.512C12.895 3.389 13.797 4 15 4v2c-1.753 0-3.07-.814-4-1.829V11a5 5 0 1 1-5-5v2a3 3 0 1 0 3 3V0Z"/>
          </svg>

        </div>
          <a
          href="#"
          class="inline-flex items-center mt-4 px-3 py-2 text-sm font-medium text-center text-white rounded-lg focus:ring-4 focus:outline-none  bg-blue-600 hover:bg-blue-700 focus:ring-blue-800 transition ease-in-out duration-500"
        >
          More info
          <svg
            class="w-3.5 h-3.5 ml-2"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 14 10"
          >
            <path
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M1 5h12m0 0L9 1m4 4L9 9"
            />
          </svg>
        </a>
    </div>
    

  </div>

</div>
  {% endblock %}